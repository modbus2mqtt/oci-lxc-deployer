{
  "name": "Samba File Shares",
  "description": "SMB/CIFS file sharing for the container. Upload a custom smb.conf to configure shares.",
  "tags": ["storage", "network"],

  "compatible_with": "*",

  "parameters": [
    {
      "id": "smb_user",
      "name": "Samba Username",
      "type": "string",
      "required": true,
      "description": "Username for Samba authentication"
    },
    {
      "id": "smb_password",
      "name": "Samba Password",
      "type": "string",
      "required": true,
      "secure": true,
      "description": "Password for Samba authentication"
    }
  ],

  "parameterOverrides": [
    {
      "id": "addon_content",
      "name": "Samba Configuration File",
      "description": "Upload your smb.conf file"
    }
  ],

  "properties": [
    { "id": "addon_packages", "value": "samba" },
    { "id": "addon_volumes", "value": "samba_private=/var/lib/samba/private,0700,0:0\nsamba_config=/etc/samba,0700,0:0" },
    { "id": "addon_path", "value": "samba_config:smb.conf" }
  ],

  "pre_start": [
    {
      "name": "150-conf-create-storage-volumes-for-lxc.json",
      "after": "100-conf-create-configure-lxc.json"
    },
    {
      "name": "155-conf-upload-pre-start-files.json",
      "after": "150-conf-create-storage-volumes-for-lxc.json"
    }
  ],

  "post_start": [
    "330-post-install-packages.json",
    "335-post-samba-configure-service.json"
  ],

  "upgrade": [],

  "notes_key": "samba-shares"
}
