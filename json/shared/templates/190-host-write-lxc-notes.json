{
  "execute_on": "ve",
  "name": "Write LXC Notes",
  "description": "Writes the container notes/description with all metadata markers.\n\nThis template runs at the end of container configuration (before start) to ensure all information from other conf-* scripts is available.\n\nThe notes contain:\n- Hidden markers for machine parsing (oci-lxc-deployer:managed, oci-image, application-id, etc.)\n- Visible Markdown content with application info, version, and links",
  "parameters": [
    {
      "id": "vm_id",
      "name": "VM ID",
      "type": "number",
      "required": true,
      "description": "Container ID"
    },
    {
      "id": "hostname",
      "name": "Hostname",
      "type": "string",
      "required": true,
      "description": "Container hostname"
    },
    {
      "id": "template_path",
      "name": "Template Path",
      "type": "string",
      "description": "LXC template path (for non-OCI installations)"
    },
    {
      "id": "oci_image",
      "name": "OCI Image",
      "type": "string",
      "description": "OCI image reference (e.g. docker://alpine:3.19)"
    },
    {
      "id": "application_id",
      "name": "Application ID",
      "type": "string",
      "description": "Application identifier"
    },
    {
      "id": "application_name",
      "name": "Application Name",
      "type": "string",
      "description": "Human-readable application name"
    },
    {
      "id": "oci_image_tag",
      "name": "OCI Image Tag",
      "type": "string",
      "description": "OCI image tag/version (e.g. 0.17.5)"
    },
    {
      "id": "deployer_base_url",
      "name": "Deployer Base URL",
      "type": "string",
      "advanced": true,
      "description": "Auto-injected by backend: Base URL for log viewer links"
    },
    {
      "id": "ve_context_key",
      "name": "VE Context Key",
      "type": "string",
      "advanced": true,
      "description": "Auto-injected by backend: VE context identifier"
    },
    {
      "id": "icon_base64",
      "name": "Icon Base64",
      "type": "string",
      "advanced": true,
      "description": "Auto-injected by backend: Base64-encoded application icon"
    },
    {
      "id": "icon_mime_type",
      "name": "Icon MIME Type",
      "type": "string",
      "advanced": true,
      "description": "Auto-injected by backend: Icon MIME type (image/svg+xml or image/png)"
    }
  ],
  "commands": [
    {
      "name": "Write LXC Notes",
      "script": "host-write-lxc-notes.py",
      "outputs": ["notes_written"]
    }
  ]
}
