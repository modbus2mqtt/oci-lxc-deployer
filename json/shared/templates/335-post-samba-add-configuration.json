{
  "name": "Configure Samba",
  "execute_on": "lxc",
  "description": "Upload smb.conf and create Samba user. The passdb is persisted in /var/lib/samba/private via bind mount.",
  "skip_if_all_missing": ["samba_config"],
  "parameters": [
    {
      "id": "samba_config",
      "name": "Samba Configuration File",
      "type": "string",
      "upload": true,
      "required": true,
      "description": "Samba configuration file (smb.conf) to upload"
    },
    {
      "id": "smb_user",
      "name": "Samba Username",
      "type": "string",
      "required": true,
      "description": "Username for Samba authentication"
    },
    {
      "id": "smb_password",
      "name": "Samba Password",
      "type": "string",
      "required": true,
      "secure": true,
      "description": "Password for Samba authentication"
    }
  ],
  "commands": [
    {
      "script": "post-samba-add-configuration.sh",
      "description": "Write smb.conf and configure Samba user"
    }
  ]
}
