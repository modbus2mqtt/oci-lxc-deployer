{
  "execute_on": "ve",
  "name": "Generate Certificates",
  "skip_if_all_missing": ["cert_requests"],
  "parameters": [
    { "id": "cert_requests", "name": "Cert Requests", "type": "string", "internal": true, "multiline": true },
    { "id": "ca_key_b64", "name": "CA Key", "type": "string", "internal": true, "secure": true },
    { "id": "ca_cert_b64", "name": "CA Cert", "type": "string", "internal": true },
    { "id": "shared_volpath", "name": "Shared Volume Path", "type": "string", "required": true },
    { "id": "hostname", "name": "Hostname", "type": "string", "required": true },
    { "id": "domain_suffix", "name": "Domain Suffix", "type": "string", "default": ".local", "advanced": true, "description": "FQDN = hostname + domain_suffix" },
    { "id": "uid", "name": "UID", "type": "string", "default": "0", "advanced": true },
    { "id": "gid", "name": "GID", "type": "string", "default": "0", "advanced": true },
    { "id": "mapped_uid", "name": "Mapped UID", "type": "string", "advanced": true },
    { "id": "mapped_gid", "name": "Mapped GID", "type": "string", "advanced": true }
  ],
  "commands": [{
    "name": "Generate Certificates",
    "script": "conf-generate-certificates.sh",
    "library": "cert-common.sh",
    "outputs": ["certs_generated"]
  }]
}
