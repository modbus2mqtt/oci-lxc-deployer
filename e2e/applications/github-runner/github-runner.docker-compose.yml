services:
  gh-runner-oci-lxc-deployer:
    image: ghcr.io/modbus2mqtt/github-actions-runner:latest
    restart: unless-stopped
    environment:
      REPO_URL: "https://github.com/modbus2mqtt/oci-lxc-deployer"
      ACCESS_TOKEN: "{{ GITHUB_RUNNER_TOKEN }}"
      RUNNER_NAME: "${RUNNER_NAME:-pve1-modbus2mqtt}"
      LABELS: "self-hosted,linux,x64,pve1"
      SSH_PRIVATE_KEY: "{{ CI_WORKER_SSH_PRIVATE_KEY }}"
      # pvetest infrastructure (set to match your deployment)
      PVETEST_HOST: "{{ PVETEST_HOST }}"
      PVETEST_WORKER_HOST: "{{ PVETEST_WORKER_HOST }}"
      PVETEST_WORKER_PORT: "22"
      PVETEST_WORKER_USER: "root"
      PVETEST_WOL_MAC: "{{ PVETEST_WOL_MAC }}"
      PVETEST_DEPLOYER_PORT: "{{ PVETEST_DEPLOYER_PORT }}"
      # pvetest install-test (nested VM config)
      PVETEST_NESTED_SSH_PORT: "{{ PVETEST_NESTED_SSH_PORT }}"
      PVETEST_NESTED_VMID: "{{ PVETEST_NESTED_VMID }}"
